---
layout: default
title: "HW07: MP3 browser"
due: "Oct 31, 11:59pm"
categories: [assignments]
---

# HW07: MP3 browser

Create a simple MP3 file browser.

Name your BitBucket repository `csci221-HW07`.

## Requirements

- Read all MP3 files (extension `.mp3`) in the current directory and all
  subdirectories (recursively), and add them to an STL list (`#include <list>`) or vector (`#include <vector>`).
- When reading an MP3 file, read its filename, title, artist, year, and genre. See the ID3v1 tag specification below). Convert genre id's to strings using the `genres.h` file in `genres.h`. Include `string genres[148];` in the top of your `main.cpp` file, and execute `intialize_genres()` as the first thing in your `main()` function. For any other code (besides `main.cpp`) that requires accessing this global `genres` array, put `extern string genres[148]` at the top of that file. Look up the genre in the array only in cases where the id is `>= 0` and `< 148`. Other genre ids are considered to be in the "Unknown" genre.
- Each MP3 file should be an instance of an `MP3` class. Create this class. It should have fields for the different attributes of an MP3 (from the ID3v1 tag), plus its file path.
- The list, containing all MP3 instances, should be managed by a single instance of a `Database` class. The Database class should also provide a handful of search functions: `search_title`, `search_artist`,
  `search_album`, and `search_year`. Finally, include a `show_all` function in the Database class that simply prints info about every MP3 file.
- Provide an interactive search mechanism, which asks whether to  search on title or artist or year, and then asks for the search value. The response should be a list of all MP3 files that match the search
  criteria. For title and artist, check for partial string matches (use the `find` string function). For year, check for exact matches. Include some kind of `list` command that shows all the MP3 files. The
  Database class should do the search and print the results, but the `main` function should handle the user interaction.
- Create a Makefile.

## ID3v1 tag specification

Look at last 128 bytes of the file. It should start with "TAG" (3 bytes). Then:

- Song Title: 30 characters
- Artist: 30 characters
- Album: 30 characters
- Year: 4 characters
- Comment: 30 characters
- Genre: 1 byte

Those fields add up to 125 bytes; plus "TAG", we get 128 bytes.

Example:

{% highlight cpp %}
char title[31]; // reserve space for the terminating \0 character
f.read(title, 30); // read 30 characters from the file
title[30] = 0; // set the terminating character to \0 (integer 0)
{% endhighlight %}

Note the extra terminating character, which is required for "C-style" (old-style) strings.

## Example interaction

Given these files, available on Londo in `/home/jeckroth/csci221/homework/HW07/`,

<pre>
Read 53 MP3 files.


Type 'list' or enter a query: [artist/title/album/year] [query]
&gt; <b>list</b>
Hungry Lucy - Balloon Girl (Pulse of the Earth, 2010) [http://www.archive.org/detai] Unknown
Hungry Lucy - Simone (Pulse of the Earth, 2010) [http://www.archive.org/detai] Unknown
Hungry Lucy - Just Imagine (Pulse of the Earth, 2010) [http://www.archive.org/detai] Unknown
Hungry Lucy - Sunday Smiled (Pulse of the Earth, 2010) [http://www.archive.org/detai] Unknown
Hungry Lucy - Pulse of the Earth (Pulse of the Earth, 2010) [http://www.archive.org/detai] Unknown
Hungry Lucy - Hill (Pulse of the Earth, 2010) [http://www.archive.org/detai] Unknown
Hungry Lucy - Bumble (Pulse of the Earth, 2010) [http://www.archive.org/detai] Unknown
Hungry Lucy - Wandering (Pulse of the Earth, 2010) [http://www.archive.org/detai] Unknown
Hungry Lucy - Voyeur (Pulse of the Earth, 2010) [http://www.archive.org/detai] Unknown
Hungry Lucy - The Standing Ones (Pulse of the Earth, 2010) [http://www.archive.org/detai] Unknown
Nine Inch Nails - Letting You (The Slip, 2008) [] Unknown
Nine Inch Nails - Demon Seed (The Slip, 2008) [] Unknown
Nine Inch Nails - 999,999 (The Slip, 2008) [] Unknown
Nine Inch Nails - Corona Radiata (The Slip, 2008) [] Unknown
Nine Inch Nails - Descipline (The Slip, 2008) [] Unknown
Nine Inch Nails - 1,000,000 (The Slip, 2008) [] Unknown
Nine Inch Nails - Echoplex (The Slip, 2008) [] Unknown
Nine Inch Nails - The Four of us are Dying (The Slip, 2008) [] Unknown
Nine Inch Nails - Lights in the Sky (The Slip, 2008) [] Unknown
Nine Inch Nails - Head Down (The Slip, 2008) [] Unknown
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbB - aaaaaaaaaaaaaaaaaaaaaaaaaaaaaA (cccccccccccccccccccccccccccccC, 2003) [dddddddddddddddddddddddddddD] Blues
-  (, ) [] Blues
    Artist - Title (Album, 2003) [Comment] Hip-Hop
-  (, 2003) [] Blues
-  (,    3) [] Blues
-  (, 2003) [] Blues
-  Disco (, 2003) [] Disco
-  Funk (, 2003) [] Funk
-  Country (, 2003) [] Country
-  Blues (, 2003) [] Blues
-  Dance (, 2003) [] Dance
-  Classic Rock (, 2003) [] Classic Rock
-  Grunge (, 2003) [] Grunge
    Artist - Title (Album, 2003) [Comment] Hip-Hop
-  (, 112) [] Blues
-  (, 0000) [] Blues
-  (, 2003) [] Blues
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbB - aaaaaaaaaaaaaaaaaaaaaaaaaaaaaA (cccccccccccccccccccccccccccccC, 2003) [dddddddddddddddddddddddddddddD] Blues
-  (, 9999) [] Blues
    12345 - 12345 (12345, 2003) [12345] Blues
    12345 - 12345 (12345, 2003) [12345] Blues
    Monk Turner - Halloween Night (Calendar, 2008) [] Unknown
    Monk Turner - Valentines Directions for the (Calendar, 2008) [] Unknown
    Monk Turner - June (I Hate This Month) (Calendar, 2008) [] Unknown
    Monk Turner - Labor Day Sale (Calendar, 2008) [] Unknown
    Monk Turner - Agustus (Calendar, 2008) [] Unknown
    Monk Turner - January 1st (Calendar, 2008) [] Unknown
    Monk Turner - Merry May (Calendar, 2008) [] Unknown
    Monk Turner - December Song (Calendar, 2008) [] Unknown
    Monk Turner - Turkey Time (Calendar, 2008) [] Unknown
    Monk Turner - March in March (Calendar, 2008) [] Unknown
    Monk Turner - April Girl (Calendar, 2008) [] Unknown
    Monk Turner - Hot July (Calendar, 2008) [] Unknown


Type 'list' or enter a query: [artist/title/album/year] [query]
&gt; <b>artist Nine</b>
Nine Inch Nails - Letting You (The Slip, 2008) [] Unknown
Nine Inch Nails - Demon Seed (The Slip, 2008) [] Unknown
Nine Inch Nails - 999,999 (The Slip, 2008) [] Unknown
Nine Inch Nails - Corona Radiata (The Slip, 2008) [] Unknown
Nine Inch Nails - Descipline (The Slip, 2008) [] Unknown
Nine Inch Nails - 1,000,000 (The Slip, 2008) [] Unknown
Nine Inch Nails - Echoplex (The Slip, 2008) [] Unknown
Nine Inch Nails - The Four of us are Dying (The Slip, 2008) [] Unknown
Nine Inch Nails - Lights in the Sky (The Slip, 2008) [] Unknown
Nine Inch Nails - Head Down (The Slip, 2008) [] Unknown


Type 'list' or enter a query: [artist/title/album/year] [query]
&gt; <b>title April</b>
Monk Turner - April Girl (Calendar, 2008) [] Unknown


Type 'list' or enter a query: [artist/title/album/year] [query]
&gt; <b>album Calendar</b>
Monk Turner - Halloween Night (Calendar, 2008) [] Unknown
Monk Turner - Valentines Directions for the (Calendar, 2008) [] Unknown
Monk Turner - June (I Hate This Month) (Calendar, 2008) [] Unknown
Monk Turner - Labor Day Sale (Calendar, 2008) [] Unknown
Monk Turner - Agustus (Calendar, 2008) [] Unknown
Monk Turner - January 1st (Calendar, 2008) [] Unknown
Monk Turner - Merry May (Calendar, 2008) [] Unknown
Monk Turner - December Song (Calendar, 2008) [] Unknown
Monk Turner - Turkey Time (Calendar, 2008) [] Unknown
Monk Turner - March in March (Calendar, 2008) [] Unknown
Monk Turner - April Girl (Calendar, 2008) [] Unknown
Monk Turner - Hot July (Calendar, 2008) [] Unknown


Type 'list' or enter a query: [artist/title/album/year] [query]
&gt; <b>year 2008</b>
Nine Inch Nails - Letting You (The Slip, 2008) [] Unknown
Nine Inch Nails - Demon Seed (The Slip, 2008) [] Unknown
Nine Inch Nails - 999,999 (The Slip, 2008) [] Unknown
Nine Inch Nails - Corona Radiata (The Slip, 2008) [] Unknown
Nine Inch Nails - Descipline (The Slip, 2008) [] Unknown
Nine Inch Nails - 1,000,000 (The Slip, 2008) [] Unknown
Nine Inch Nails - Echoplex (The Slip, 2008) [] Unknown
Nine Inch Nails - The Four of us are Dying (The Slip, 2008) [] Unknown
Nine Inch Nails - Lights in the Sky (The Slip, 2008) [] Unknown
Nine Inch Nails - Head Down (The Slip, 2008) [] Unknown
Monk Turner - Halloween Night (Calendar, 2008) [] Unknown
Monk Turner - Valentines Directions for the (Calendar, 2008) [] Unknown
Monk Turner - June (I Hate This Month) (Calendar, 2008) [] Unknown
Monk Turner - Labor Day Sale (Calendar, 2008) [] Unknown
Monk Turner - Agustus (Calendar, 2008) [] Unknown
Monk Turner - January 1st (Calendar, 2008) [] Unknown
Monk Turner - Merry May (Calendar, 2008) [] Unknown
Monk Turner - December Song (Calendar, 2008) [] Unknown
Monk Turner - Turkey Time (Calendar, 2008) [] Unknown
Monk Turner - March in March (Calendar, 2008) [] Unknown
Monk Turner - April Girl (Calendar, 2008) [] Unknown
Monk Turner - Hot July (Calendar, 2008) [] Unknown


Type 'list' or enter a query: [artist/title/album/year] [query]
&gt; <b>title foobar</b>

Type 'list' or enter a query: [artist/title/album/year] [query]
&gt; <b>xyz</b>
Huh?
</pre>

These albums are as follows:

- [Calendar](https://archive.org/details/calendar)
- [Nine Inch Nails - The Slip](https://archive.org/details/nine_inch_nails_the_slip)
- [Pulse of the Earth](https://archive.org/details/Pulse_of_the_Earth)

The other files are [id3v1 tag test files](http://id3.org/Developer%20Information?action=AttachFile&do=view&target=id3v1_test_suite.tar.gz)
